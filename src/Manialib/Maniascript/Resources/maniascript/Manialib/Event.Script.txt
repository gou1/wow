#Include "Manialib/Logger.Script.txt" as Logger

declare Text[][][] G_Manialib_Event_PendingEvents;
declare Text[][][] G_Manialib_Event_UpcomingEvents;

Void Manialib_Event_DispatchCustomEvent(Text _Type, Text[] _Data) {
    if(_Data.count > 0)
    {
        Logger::Debug("[Event] "^_Type^" "^_Data[0]);
    }
    else
    {
        Logger::Debug("[Event] "^_Type);
    }
  G_Manialib_Event_UpcomingEvents.add([[_Type], _Data]);
}

Void Manialib_Event_DispatchCustomEvent(Text _Type) {
  Manialib_Event_DispatchCustomEvent(_Type, Text[]);
}

Text[][][] Manialib_Event_PendingEvents() {
  return G_Manialib_Event_PendingEvents;
}

Void Manialib_Event_Yield() {
    G_Manialib_Event_PendingEvents = G_Manialib_Event_UpcomingEvents;
  if(G_Manialib_Event_UpcomingEvents.count > 0) {
    G_Manialib_Event_UpcomingEvents = Text[][][];
  }
}